/**!
 *  jQuery Split-Slider Plugin - v0.0.1
 *  Split Slider is an image carousel that animates an image split into two equal halves. Each half animates vertically from the top or bottom, in opposing directions.
 *  
 *  Made by Christopher Tino
 *  Under MIT License
 */
!function(a,b,c){function d(b,c){this.el=a(b),this.settings=a.extend({},e,c),this.defaults=e,this._init()}var e={captions:!0,controls:!0,delay:3e3,pager:!0,slideWidth:1e3,speed:.5,useTouch:!0};d.prototype={_init:function(){return 0===this.el.length?this:(this.el.wrap('<div class="slider-wrap"></div>'),this.el.addClass("slider-view"),"auto"===this.settings.slideWidth?a(".slider-wrap").css("max-width","100%"):a(".slider-wrap").css("max-width",this.settings.slideWidth.toString()+"px"),a(".slider-view").css("height",a(".left-images li").outerHeight()),this.slideHeight=a(".slider-view").outerHeight(),this.slideCount=a(".left-images").children().length,this.activeSlide=1,this.rightImgPos=this._buildRightImgArray(this.slideCount),this.browserPrefix="-"+this._getBrowserPrefix()+"-",this._checkSliderLength(this.settings.captions)?(this._loadFirstSlides(),this.settings.controls&&this._buildControls(),this.settings.pager&&this._buildPager(),this.startSlider(),this.el.hover(function(){this.autoPlay&&(this.stopSlider(),this.paused=!0)}.bind(this),function(){this.paused&&(this.startSlider(),this.paused=null)}.bind(this)),this.settings.useTouch&&("ontouchstart"in b&&a("control-arrows").hide(),this.touchObj={start:{x:0,y:0},end:{x:0,y:0}},a(".slider-view").on("touchstart",this._onTouchStart.bind(this))),void a(b).on("resize",this._onResizeEvent.bind(this))):(console.log("You must have an equal number of left and right images."),!1))},_getBrowserPrefix:function(){var a=c.createElement("div"),b=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var d in b)if(void 0!==a.style[b[d]])return b[d].replace("Perspective","").toLowerCase();return!1},_checkSliderLength:function(b){return b?a(".captions").children().length===a(".right-images").children().length&&a(".captions").children().length===this.slideCount?!0:!1:this.slideCount===a(".right-images").children().length},_buildRightImgArray:function(b){var c=new Array(b),d=c.length;return c=a.map(c,function(){return d--})},_buildControls:function(){a(".slider-wrap").append('<div class="controls"><div class="control-arrows"><span class="prev"></span><span class="next"></span></div></div>'),a(".control-arrows").on("click touchend","span.prev",function(){this.autoPlay&&(this.stopSlider(),this.paused=!0),this.animateSlide("prev")}.bind(this)).on("click touchend","span.next",function(){this.autoPlay&&(this.stopSlider(),this.paused=!0),this.animateSlide("next")}.bind(this))},_buildPager:function(){a(".controls").prepend('<div class="pager"></div>');for(var b=0;b<this.slideCount;b++)a(".controls .pager").append('<div class="pager-item"><span class="pager-link" data-slide-index="'+b+'">'+b+"</span></div>");a(".pager .pager-item").eq(0).children(".pager-link").addClass("active"),a(".pager").on("click touchend","span.pager-link",function(b){this.autoPlay&&(this.stopSlider(),this.paused=!0);var c=a(b.target).data("slide-index");this.animateSlide("pager",c+1)}.bind(this))},_reverseSlides:function(){var b=a(".right-images li").get().reverse();a(".right-images").empty();for(var c in b)a(".right-images").append(b[c]);var d=-this.slideHeight*this.slideCount;a(".right-images").css(this.browserPrefix+"transform","translate3d(0, "+d+"px, 0)")},_loadFirstSlides:function(){this.el.append('<div class="loader"></div>');var b=this.settings.speed.toString()+"s";a(".left-images, .right-images").hide().css(this.browserPrefix+"transition-duration",b),a(".left-images").css(this.browserPrefix+"transform","translate3d(0, "+-this.slideHeight+"px, 0)"),a(".left-images li").eq(0).clone().appendTo(".left-images").addClass("clone"),a(".left-images li").eq(this.slideCount-1).clone().prependTo(".left-images").addClass("clone"),a(".right-images li").eq(0).clone().appendTo(".right-images").addClass("clone"),a(".right-images li").eq(this.slideCount-1).clone().prependTo(".right-images").addClass("clone"),this._reverseSlides();setTimeout(function(b){a(".loader").remove(),a(".left-images, .right-images").fadeIn(500),b.settings.captions&&a(".captions li").eq(0).fadeIn(500)},500,this)},_onResizeEvent:function(){clearTimeout(d),this.autoPlay&&(this.stopSlider(),this.paused=!0),a(".slider-view").css("height",a(".left-images li").outerHeight()),this.slideHeight=a(".slider-view").outerHeight();var b=-(this.activeSlide*this.slideHeight),c=-(this.rightImgPos[this.activeSlide-1]*this.slideHeight);a(".left-images, .right-images").css(this.browserPrefix+"transition-duration","0s"),a(".left-images").css(this.browserPrefix+"transform","translate3d(0, "+b+"px, 0)"),a(".right-images").css(this.browserPrefix+"transform","translate3d(0, "+c+"px, 0)");var d=setTimeout(function(a){a.paused&&(a.startSlider(),a.paused=null)},100,this)},_onTouchStart:function(b){var c=b.originalEvent,d="undefined"!=typeof c.changedTouches?c.changedTouches:[c];this.touchObj.start.x=d[0].pageX,this.touchObj.start.y=d[0].pageY,a(".slider-view").bind("touchmove",this._onTouchMove.bind(this)),a(".slider-view").bind("touchend",this._onTouchEnd.bind(this))},_onTouchMove:function(a){var b=a.originalEvent,c="undefined"!=typeof b.changedTouches?b.changedTouches:[b],d=Math.abs(c[0].pageX-this.touchObj.start.x),e=Math.abs(c[0].pageY-this.touchObj.start.y);3*d>e&&a.preventDefault()},_onTouchEnd:function(b){var c=b.originalEvent,d="undefined"!=typeof c.changedTouches?c.changedTouches:[c],e=150;this.touchObj.end.x=d[0].pageX,this.touchObj.end.y=d[0].pageY;var f=this.touchObj.end.x-this.touchObj.start.x;Math.abs(f)>=e&&(this.animateSlide(0>f?"next":"prev"),this.stopSlider()),a(".slider-view").unbind("touchend")},animateSlide:function(b,c){var d=this.settings.speed.toString()+"s";a(".left-images, .right-images").css(this.browserPrefix+"transition-duration",d);var e=-(this.activeSlide*this.slideHeight),f=-(this.rightImgPos[this.activeSlide-1]*this.slideHeight);"pager"===b&&null!==c?(e=-(c*this.slideHeight),f=-(this.rightImgPos[c-1]*this.slideHeight),this.activeSlide=c):"prev"===b?(e+=this.slideHeight,f-=this.slideHeight):(e-=this.slideHeight,f+=this.slideHeight),a(".left-images").css(this.browserPrefix+"transform","translate3d(0, "+e+"px, 0)"),a(".right-images").css(this.browserPrefix+"transform","translate3d(0, "+f+"px, 0)"),a(".right-images").on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){var c;this.activeSlide===this.slideCount&&"next"===b?(a(".left-images, .right-images").css(this.browserPrefix+"transition-duration","0s"),a(".left-images").css(this.browserPrefix+"transform","translate3d(0, "+-this.slideHeight+"px, 0)"),c=-this.slideHeight*this.slideCount,a(".right-images").css(this.browserPrefix+"transform","translate3d(0, "+c+"px, 0)"),this.activeSlide=1):1===this.activeSlide&&"prev"===b?(a(".left-images, .right-images").css(this.browserPrefix+"transition-duration","0s"),c=-this.slideHeight*this.slideCount,a(".left-images").css(this.browserPrefix+"transform","translate3d(0, "+c+"px, 0)"),a(".right-images").css(this.browserPrefix+"transform","translate3d(0, "+-this.slideHeight+"px, 0)"),this.activeSlide=this.slideCount):"pager"===b||("prev"===b?this.activeSlide--:this.activeSlide++),this.settings.pager&&(a(".pager .pager-link").removeClass("active"),a(".pager .pager-item").eq(this.activeSlide-1).children(".pager-link").addClass("active")),this.settings.captions&&(a(".captions li:visible").hide(),a(".captions li").eq(this.activeSlide-1).fadeIn(500)),a(".right-images").off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd")}.bind(this))},startSlider:function(){this.autoPlay||(this.autoPlay=setInterval(function(a){a.animateSlide("next")},this.settings.delay,this))},stopSlider:function(){this.autoPlay&&(clearInterval(this.autoPlay),this.autoPlay=null)}},a.fn.splitslider=function(b){this.each(function(){var c=a.data(this,"splitslider");return c||(c=new d(this,b),a.data(this,"splitslider",c)),this})}}(jQuery,window,document);